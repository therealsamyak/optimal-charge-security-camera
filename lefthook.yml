pre-commit:
  commands:
    py-lint:
      glob: "**/*.py"
      run: uvx ruff check --fix --force-exclude {staged_files}
      stage_fixed: true

    py-format:
      glob: "**/*.py"
      run: uvx ruff format {staged_files}
      stage_fixed: true

    json-md-yml-format:
      glob: "**/*.{astro,html,js,jsx,md,mdx,svelte,ts,tsx,vue,json,css,yml,yaml}"
      exclude: "results/**/*"
      run: |
        if command -v bunx >/dev/null 2>&1; then
          bunx oxfmt@latest {staged_files}
        else
          echo "bunx not found, skipping prettier formatting"
          exit 0
        fi
      stage_fixed: true
